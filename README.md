# SoftwareDesighnProject
User story
1. Напоминания
   1. Как пользователь бота я хочу иметь возможность создать событие (день рождения), указав дату и имя, чтобы бот автоматически поздравил друга в указанную дату
   2. Как пользователь бота я хочу иметь возможность просматривать все активные напоминания, чтобы видеть все созданные события и управлять ими
   3. .Как пользователь бота я хочу иметь возможность удалить или изменить событие, чтобы бот поздравил друга в другую дату
   4. .Как участник группового чата я хочу создавать события для всех участников чата, чтобы в указанную дату бот автоматически отправлял поздравления, видные для всех участников, в чат

3. Поздравления
   1. Как пользователь, создающий напоминание я хочу, чтобы бот автоматически генерировал уникальные и персонализированные поздравления с помощью AI, чтобы каждый получал оригинальное поздравление
   2. Как пользователь бота я хочу, иметь возможность указать свой шаблон или ключевые слова для поздравления, чтобы AI генерировал поздравления в определенном стиле или с конкретными пожеланиями

5. Управление чатом
   1. Как участник чата я хочу видеть кто еще участвует в поздравлении, чтобы координировать свои действия с другими пользователями и не повторяться
   2. Как администратор чата я хочу утверждать или отклонять напоминания, созданные в чате, чтобы контролировать контент 

Характер нагрузки на сервис
  Соотношение R/W нагрузки
	~30% Write / 60% Read
Запись (Write): Каждое создание напоминания пользователем — это операция записи (INSERT в несколько таблиц). Пользователи создают напоминания, когда добавляют его в беседу.
Чтение (Read): Чтение происходит в двух основных сценариях:
Ежедневный запуск — это один большой запрос на чтение всех напоминаний на сегодня.
Пользователи, просматривающие свои напоминания
Вывод: Нагрузка чтения значительно преобладает.

  Объемы трафика
Входящий трафик (от пользователей): Небольшой. В основном это текстовые команды и сообщения для бота (несколько килобайт в секунду на пике).
Исходящий трафик (к пользователям): Может быть значительным, особенно если ChatGPTService генерирует длинные поздравления. Предположим, 1 поздравление = 1 КБ. При 1000 напоминаний в день — ~1 ГБ исходящего трафика в день. Пиковая нагрузка — утром, когда все напоминания отправляются за короткий период.

  Объемы дисковой системы 
Основные данные: User, Chat, Reminder. Это структурированные данные, один экземпляр весит очень мало (байты/килобайты).
Рост данных: Главный фактор роста — таблица Reminder. Предположим, 100 000 активных пользователей создают по 10 напоминаний в год. Это 1 млн записей в год. За 5 лет ~5 млн записей — объем все еще небольшой для современной СУБД.
Оценка: Даже с учетом индексов, начальный объем БД можно оценить в 1-2 ГБ, с ростом на ~1 ГБ в год. Дисковая система не будет узким местом.


Контракты API + Ожидаемые нефункциональные требования на время отклика
Сервис как таковой не предоставляет публичного REST API, его "API" — это протокол взаимодействия с Telegram Bot API. Однако мы можем описать ключевые сценарии.
Ключевой сценарий: Создание напоминания
Пользователь -> Бот: /remind @username 15.03.2024 День Рождения
Бот -> Система: Парсит команду, создает объекты User, Chat, Reminder.
Система -> Бот: "Напоминание создано!"
Ключевой сценарий: Ежедневная рассылка напоминаний
Scheduler -> ReminderService: getTodaysReminders()
ReminderService -> ReminderRepository: findAllByEventDate(today)
Для каждого напоминания:
Scheduler -> ChatGPTService: generateCongratulation() (может быть кешировано для одинаковых событий)
Scheduler -> TelegramBot: sendMessage(chatId, congratulationText)
Ожидаемые нефункциональные требования (SLA):
Время отклика на команду пользователя: < 2 секунд (требование Telegram Bot API для избежания таймаута).
Время обработки запроса к OpenAI GPT API: < 10 секунд (зависит от внешнего сервиса, нам нужно уложиться в общий таймаут).
Время выполнения ежедневной задачи рассылки: < 30 минут (чтобы все пользователи в разных часовых поясах получили сообщения утром).
Доступность (Availability): > 99.5% (сервис не критически важен, но должен быть стабильным).
